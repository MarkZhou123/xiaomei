#!/bin/bash
cd $(dirname $0)/..

targetDirs='appserver/ config/ helpers/ models/ routes/ services/ tools/ utils/ 
  vendor/github.com/bughou-go/'
if test "$1" = all; then
  files="$targetDirs"
else
  files=$(git diff --name-only --diff-filter=AMR -- $targetDirs)
fi

test -z "$files" && exit 0

which gospec >/dev/null || go get -u github.com/bughou-go/spec/gospec

gospec $files
